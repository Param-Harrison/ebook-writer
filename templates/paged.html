<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>$title$</title>
  <link rel="stylesheet" href="paged.css"/>
  <!-- Prism.js for code highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
  <script>
    // Page navigation and progress tracking
    document.addEventListener('DOMContentLoaded', function() {
      const pages = document.querySelectorAll('.page');
      const progressBar = document.querySelector('.progress-bar-fill');
      const pageCounter = document.querySelector('.page-counter');
      const totalPages = pages.length;
      let currentPage = 0;

      // Initialize progress
      updateProgress();

      // Navigation functions
      function showPage(pageIndex) {
        pages.forEach((page, index) => {
          page.style.display = index === pageIndex ? 'block' : 'none';
        });
        currentPage = pageIndex;
        updateProgress();
        updateNavigation();
      }

      function updateProgress() {
        const progress = ((currentPage + 1) / totalPages) * 100;
        progressBar.style.width = progress + '%';
        pageCounter.textContent = currentPage + 1 + ' of ' + totalPages;
      }

      function updateNavigation() {
        const prevBtn = document.querySelector('.nav-prev');
        const nextBtn = document.querySelector('.nav-next');
        
        prevBtn.style.opacity = currentPage === 0 ? '0.5' : '1';
        nextBtn.style.opacity = currentPage === totalPages - 1 ? '0.5' : '1';
      }

      // Event listeners
      document.querySelector('.nav-prev').addEventListener('click', function() {
        if (currentPage > 0) {
          showPage(currentPage - 1);
        }
      });

      document.querySelector('.nav-next').addEventListener('click', function() {
        if (currentPage < totalPages - 1) {
          showPage(currentPage + 1);
        }
      });

      // Keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft' && currentPage > 0) {
          showPage(currentPage - 1);
        } else if (e.key === 'ArrowRight' && currentPage < totalPages - 1) {
          showPage(currentPage + 1);
        }
      });

      // Show first page initially
      showPage(0);
    });
  </script>
</head>
<body>
  <div class="book-container">
    <!-- Navigation Header -->
    <div class="navigation-header">
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-bar-fill"></div>
        </div>
        <div class="page-counter">1 of 1</div>
      </div>
      <div class="nav-buttons">
        <button class="nav-btn nav-prev">← Previous</button>
        <button class="nav-btn nav-next">Next →</button>
      </div>
    </div>

    <!-- Content Pages -->
    <div class="pages-container">
      $body$
    </div>

    <!-- Footer Navigation -->
    <div class="navigation-footer">
      <div class="nav-buttons">
        <button class="nav-btn nav-prev">← Previous</button>
        <button class="nav-btn nav-next">Next →</button>
      </div>
    </div>
  </div>
</body>
</html> 